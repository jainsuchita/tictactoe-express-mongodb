(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{114:function(e,n,t){},116:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t(8),o=t(32),c=t(34),i=t(67),l=t(151),s="GAME_NEW",u="GAME_OVER",m="GAME_MOVE",d="GAME_PLAYER",p="GAME_WINNER",f="SAVE_SCORE_HISTORY";function h(){return{type:s}}function g(){return{type:u}}function v(e){return{type:p,payload:e}}var E=[[{r:0,c:0},{r:0,c:1},{r:0,c:2}],[{r:1,c:0},{r:1,c:1},{r:1,c:2}],[{r:2,c:0},{r:2,c:1},{r:2,c:2}],[{r:0,c:0},{r:1,c:1},{r:2,c:2}],[{r:0,c:2},{r:1,c:1},{r:2,c:0}],[{r:0,c:0},{r:1,c:0},{r:2,c:0}],[{r:0,c:1},{r:1,c:1},{r:2,c:1}],[{r:0,c:2},{r:1,c:2},{r:2,c:2}]],b=t(40),w=t.n(b),y=function(e){w.a.post("http://localhost:3000/game",{winner:e}).then(function(e){console.log(e)}).catch(function(e){console.log(e)})},O=t(112),k=t(180),C=t(149),x=Object(O.a)(function(e){return Object(k.a)({icon:{fontSize:"2em"}})}),j=function(e){var n=e.player,t=x();return r.createElement(C.a,{className:t.icon},function(e){switch(e){case 1:return"clear";case 2:return"panorama_fish_eye";default:return""}}(n))},N=t(62),D=t.n(N),S="1px solid black",M=Object(O.a)(function(e){return Object(k.a)({square:{height:100,width:100,lineHeight:"100px",fontSize:"48px",cursor:"pointer"},marked:{cursor:"not-allowed"},row:{textAlign:"center"},"0_1":{borderLeft:S,borderRight:S},"2_1":{borderLeft:S,borderRight:S},"1_1":{border:S},"1_0":{borderTop:S,borderBottom:S},"1_2":{borderTop:S,borderBottom:S}})}),G=function(e){var n=e.board,t=e.onMove,a=M();return r.createElement(l.a,{container:!0},n.map(function(e,n){return r.createElement(l.a,{key:n,item:!0,xs:12,className:a.row},r.createElement(l.a,{container:!0,justify:"center"},e.map(function(e,o){var c=a[n+"_"+o]||"",i=0!==e?a.marked:"";return r.createElement(l.a,{key:o,item:!0,className:D()(a.square,c,i),onClick:function(){return t(n,o)}},r.createElement(j,{player:e}))})))}))},T=t(152),_=t(179),B=t(178),W=t(153),R=t(154),A=t(156),P=t(64),I=t.n(P),z=t(63),L=t.n(z),F=t(155),H=t(15),V=Object(O.a)(function(e){var n;return Object(k.a)({drawer:(n={},n[e.breakpoints.up("sm")]={width:240,flexShrink:0},n),toolbar:e.mixins.toolbar,drawerPaper:{width:240}})}),Y=function(e){var n=e.container,t=e.open,a=e.onClose,o=e.handleMenuItemClick,c=V(),i=Object(H.a)(),l=r.createElement("div",null,r.createElement("div",{className:c.toolbar}),r.createElement(T.a,null),r.createElement(W.a,null,["Start New Game","Game history"].map(function(e,n){return r.createElement(r.Fragment,{key:n},r.createElement(R.a,{button:!0,key:e,onClick:function(){return o(n)}},r.createElement(F.a,null,n%2===0?r.createElement(L.a,null):r.createElement(I.a,null)),r.createElement(A.a,{primary:e})))})),r.createElement(T.a,null));return r.createElement("nav",{className:c.drawer,"aria-label":"mailbox folders"},r.createElement(B.a,{smUp:!0,implementation:"css"},r.createElement(_.a,{container:n,variant:"temporary",anchor:"rtl"===i.direction?"right":"left",open:t,onClose:a,classes:{paper:c.drawerPaper},ModalProps:{keepMounted:!0}},l)),r.createElement(B.a,{xsDown:!0,implementation:"css"},r.createElement(_.a,{classes:{paper:c.drawerPaper},variant:"permanent",open:!0},l)))},q=t(161),J=t(160),U=t(163),X=t(162),Q=t(157),$=t(65),K=t.n($),Z=Object(O.a)(function(e){var n,t;return Object(k.a)({appBar:(n={marginLeft:240},n[e.breakpoints.up("sm")]={width:"calc(100% - 240px)"},n),menuButton:(t={marginRight:e.spacing(2)},t[e.breakpoints.up("sm")]={display:"none"},t)})});function ee(e){var n=e.onClick,t=Z();return r.createElement(r.Fragment,null,r.createElement(J.a,null),r.createElement(q.a,{position:"fixed",className:t.appBar},r.createElement(X.a,null,r.createElement(U.a,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:n,className:t.menuButton},r.createElement(K.a,null)),r.createElement(Q.a,{variant:"h6",noWrap:!0},"Tic Tac Toe"))))}var ne,te=function(e){var n=e.player,t=e.gameOver,a=1===n?"X":"O";return r.createElement(Q.a,{variant:"h4"},t&&"Gameover!",!t&&"Next Turn: "+a)},re=t(169),ae=t(164),oe=t(168),ce=t(166),ie=t(167),le=t(165),se=t(170),ue=Object(se.a)()(function(e){var n=e.fullScreen,t=e.open,a=e.isDraw,o=e.player,c=e.onClick,i=e.onClose,l=a?"Draw!":"Player - "+o+" wins!";return r.createElement(ae.a,{fullScreen:n,open:t,onClose:i,"aria-labelledby":"responsive-dialog-title"},r.createElement(le.a,{id:"responsive-dialog-title"},l),r.createElement(ce.a,null,r.createElement(ie.a,null,"Would you like to start a new game?")),r.createElement(oe.a,null,r.createElement(re.a,{onClick:function(){return c(!1)},color:"secondary"},"No"),r.createElement(re.a,{onClick:function(){return c(!0)},color:"primary",autoFocus:!0},"Yes")))}),me=t(4),de=t(66),pe=t.n(de),fe=Object(me.a)(function(e){return Object(k.a)({root:{margin:0,padding:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}})})(function(e){var n=e.children,t=e.classes,a=e.onClose;return r.createElement(le.a,{disableTypography:!0,className:t.root},r.createElement(Q.a,{variant:"h6"},n),a?r.createElement(U.a,{"aria-label":"close",className:t.closeButton,onClick:a},r.createElement(pe.a,null)):null)}),he=Object(me.a)(function(e){return{root:{padding:e.spacing(2)}}})(ce.a),ge=function(e){var n=e.open,t=e.handleClose,a=e.children;return r.createElement(r.Fragment,null,r.createElement(ae.a,{onClose:t,"aria-labelledby":"history-dialog-title",open:n},r.createElement(fe,{id:"history-dialog-title",onClose:t},"Game History"),r.createElement(he,{dividers:!0},a)))},ve=t(171),Ee=t(175),be=t(174),we=t(172),ye=t(173),Oe=t(158),ke=Object(O.a)(function(e){return Object(k.a)({root:{width:"100%",marginTop:e.spacing(3),overflowX:"auto"},table:{minWidth:400}})}),Ce=function(e){var n=e.rows,t=ke();return r.createElement(Oe.a,{className:t.root},r.createElement(ve.a,{className:t.table},r.createElement(we.a,null,r.createElement(ye.a,null,r.createElement(be.a,null,"Game"),r.createElement(be.a,{align:"right"},"Winner"))),r.createElement(Ee.a,null,n.map(function(e){return r.createElement(ye.a,{key:e.game},r.createElement(be.a,{component:"th",scope:"row"},e.game),r.createElement(be.a,{align:"right"},e.winner))}))))},xe=function(e){function n(n){var t=e.call(this,n)||this;return t.state={showDialog:!1},t.handleBoardOnMove=t.handleBoardOnMove.bind(t),t.handleDialogClick=t.handleDialogClick.bind(t),t.handleDialogClose=t.handleDialogClose.bind(t),t}return Object(c.b)(n,e),n.prototype.handleBoardOnMove=function(e,n){var t=this.props,r=t.board,a=t.player,o=t.gameOver,c=t.playTurn,i=t.checkWinner;o||0!==r[e][n]||(c(a,e,n),i(r,a)&&this.setState({showDialog:!0}))},n.prototype.handleDialogClick=function(e){e&&this.props.newGame(),this.setState({showDialog:!1})},n.prototype.handleDialogClose=function(){this.setState({showDialog:!1})},n.prototype.render=function(){var e=this.state.showDialog,n=this.props,t=n.board,a=n.player,o=n.gameOver,c=n.winner,i=0===c;return r.createElement(r.Fragment,null,r.createElement(je,null,r.createElement(te,{player:a,gameOver:o}),r.createElement(l.a,{container:!0,style:{marginTop:32}},r.createElement(l.a,{item:!0,xs:12,sm:12,md:12},r.createElement(G,{board:t,onMove:this.handleBoardOnMove})))),e&&r.createElement(ue,{open:e,isDraw:i,player:c,onClick:this.handleDialogClick,onClose:this.handleDialogClose}))},n}(r.Component),je=i.a.div(ne||(ne=Object(c.d)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  transition: box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;\n  min-width: 300px;\n\n  & p {\n    font-size: 18px;\n  }\n"],["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  transition: box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;\n  min-width: 300px;\n\n  & p {\n    font-size: 18px;\n  }\n"]))),Ne={playTurn:function(e,n,t){return function(r){var a=e;switch(e){case 1:a=2;break;case 2:a=1}r(function(e,n,t){return{type:m,payload:{player:e,row:n,col:t}}}(e,n,t)),r(function(e){return{type:d,payload:e}}(a))}},checkWinner:function(e,n){return function(t){var r=!0;return function(e,n){return E.some(function(t){return t.every(function(t){var r=t.r,a=t.c;return e[r][a]===n})})}(e,n)?(t(v(n)),t(g()),t(function(e){return{type:f,payload:e}}(n)),y(n)):function(e){return!e.some(function(e){return e.some(function(e){return 0===e})})}(e)?(t(v(0)),t(g()),y(0)):r=!1,r}},newGame:h},De=Object(o.b)(function(e){return{board:e.board,player:e.player,gameOver:e.gameOver,winner:e.winner,scores:e.scores}},Ne)(xe),Se=Object(O.a)(function(e){return Object(k.a)({root:{display:"flex"},toolbar:e.mixins.toolbar,content:{flexGrow:1,padding:e.spacing(3)}})}),Me={newGame:h},Ge=Object(o.b)(null,Me)(function(e){var n=e.children,t=e.newGame,a=Se(),o=r.useState(!1),i=o[0],l=o[1],s=r.useState(!1),u=s[0],m=s[1],d=r.useState([]),p=d[0],f=d[1],h=function(e){var n=[];e.map(function(e){var t,r;r=e,t=["winner","gameId"].map(function(e){var n;return e in r?((n={})[e]=r[e],n):{}}).reduce(function(e,n){return Object.assign(e,n)},{}),n.push(t)});var t=n.map(function(e){return v(e)});f(t)},g=function(){l(!i)},v=function(e){var n=e.gameId,t=e.winner;return 1===t?{game:n,winner:"Player1"}:2===t?{game:n,winner:"Player2"}:0===t?{game:n,winner:"Draw"}:{game:n,winner:"Error"}};return r.createElement("div",{className:a.root},r.createElement(J.a,null),r.createElement(ee,{onClick:g}),r.createElement(Y,{open:i,onClose:g,handleMenuItemClick:function(e){0===e?t():1===e&&Object(c.a)(void 0,void 0,void 0,function(){var e,n;return Object(c.c)(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,w.a.get("http://localhost:3000/game")];case 1:return e=t.sent(),h(e.data),[3,3];case 2:return n=t.sent(),console.log("error - ",n),[3,3];case 3:return m(!0),[2]}})}),l(!1)}}),r.createElement("main",{className:a.content},r.createElement("div",{className:a.toolbar}),n),u&&r.createElement(ge,{open:u,handleClose:function(){m(!1)}},r.createElement(Ce,{rows:p})))}),Te=function(){return r.createElement(Ge,null,r.createElement(De,null))},_e=t(21),Be=t(70),We=t(71),Re=[{id:1,score:0},{id:2,score:0}],Ae=Object(_e.combineReducers)({board:function(e,n){switch(void 0===e&&(e=[[0,0,0],[0,0,0],[0,0,0]]),n.type){case s:return[[0,0,0],[0,0,0],[0,0,0]];case m:return t=e,r=n.payload,a=r.player,o=r.row,c=r.col,(i=t.slice())[o][c]=a,i;default:return e}var t,r,a,o,c,i},gameOver:function(e,n){switch(void 0===e&&(e=!1),n.type){case s:return!1;case u:case p:return!0;default:return e}},winner:function(e,n){switch(void 0===e&&(e=-1),n.type){case p:return n.payload;case s:return-1;default:return e}},player:function(e,n){switch(void 0===e&&(e=1),n.type){case d:return n.payload;case s:return 1;default:return e}},scores:function(e,n){switch(void 0===e&&(e=Re),n.type){case f:return function(e,n){return e.slice().map(function(e){return e.id===n&&e.score++,e})}(e,n.payload);default:return e}}});t(114);var Pe=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Ie(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}var ze=function(e){void 0===e&&(e={});var n=[Be.a,function(e){return function(n){return function(t){console.group(t.type),console.info("dispatching",t);var r=n(t);return console.log("next state",e.getState()),console.groupEnd(t.type),r}}}];return Object(_e.createStore)(Ae,e,Object(We.composeWithDevTools)(_e.applyMiddleware.apply(void 0,n)))}({}),Le=h();ze.dispatch(Le);a.render(r.createElement(function(){return r.createElement(o.a,{store:ze},r.createElement(Te,null))},null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/tictactoe-express-mongodb",window.location.toString()).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="/tictactoe-express-mongodb/service-worker.js";Pe?(function(e){fetch(e).then(function(n){404===n.status||-1===n.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):Ie(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):Ie(e)})}}()},87:function(e,n,t){e.exports=t(116)}},[[87,2,1]]]);
//# sourceMappingURL=main.0a1e186a.chunk.js.map